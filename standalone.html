<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ ã‚¯ã‚¤ã‚ºãƒ»ã‚ªã‚¿ã‚¯çŸ¥è­˜ã®æ³‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: white;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .title {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.2em;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .stats {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 10px;
            padding: 15px 25px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .random-button {
            background: rgba(255, 215, 0, 0.3);
            border: 2px solid rgba(255, 215, 0, 0.5);
        }

        .random-button:hover {
            background: rgba(255, 215, 0, 0.4);
        }

        .quiz-header {
            margin-bottom: 30px;
        }

        .progress {
            font-size: 1.1em;
            opacity: 0.8;
        }

        .question {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 30px;
        }

        .choice {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-size: 1em;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
        }

        .choice:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .choice.selected {
            border: 2px solid rgba(255, 215, 0, 0.8);
            background: rgba(255, 215, 0, 0.2);
        }

        .back-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 10px 20px;
            color: white;
            font-size: 0.9em;
            cursor: pointer;
            margin-top: 20px;
        }

        .result {
            margin-bottom: 30px;
        }

        .emblem {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            margin: 0 auto 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            font-size: 1.2em;
        }

        .hidden {
            display: none;
        }

        .disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            .title {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ -->
        <div id="menu" class="screen">
            <h1 class="title">ğŸŒ ã‚¯ã‚¤ã‚ºãƒ»ã‚ªã‚¿ã‚¯çŸ¥è­˜ã®æ³‰</h1>
            <p class="subtitle">ã‚ãªãŸã®ã‚ªã‚¿ã‚¯åº¦ã‚’æ¸¬å®šã—ã¾ã—ã‚‡ã†ï¼</p>
            
            <div class="stats">
                <h3>ğŸ“Š åˆ©ç”¨å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿</h3>
                <div style="display: flex; flex-direction: column; gap: 8px; margin: 15px 0;">
                    <div>ğŸ“º ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹: 3å•</div>
                    <div>ğŸ“º åƒ•ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¢ã‚«ãƒ‡ãƒŸã‚¢: 3å•</div>
                    <div>ğŸ“º HUNTERÃ—HUNTER: 3å•</div>
                </div>
                <p><strong>åˆè¨ˆ: 9å•</strong></p>
            </div>

            <div class="button-group">
                <button class="button random-button" onclick="startQuiz('random')">
                    ğŸ² ãƒ©ãƒ³ãƒ€ãƒ å‡ºé¡Œ
                </button>
                <button class="button" onclick="startQuiz('ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹')">
                    ğŸ“º ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹
                </button>
                <button class="button" onclick="startQuiz('åƒ•ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¢ã‚«ãƒ‡ãƒŸã‚¢')">
                    ğŸ“º åƒ•ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¢ã‚«ãƒ‡ãƒŸã‚¢
                </button>
                <button class="button" onclick="startQuiz('HUNTERÃ—HUNTER')">
                    ğŸ“º HUNTERÃ—HUNTER
                </button>
            </div>
        </div>

        <!-- ã‚¯ã‚¤ã‚ºç”»é¢ -->
        <div id="quiz" class="screen hidden">
            <div class="quiz-header">
                <h2 id="quiz-title">ğŸ¯ ã‚¯ã‚¤ã‚º</h2>
                <div class="progress" id="progress">å•é¡Œ 1 / 3</div>
            </div>

            <div class="question">
                <h3 id="question-text">å•é¡Œæ–‡ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</h3>
            </div>

            <div class="choices" id="choices">
                <!-- é¸æŠè‚¢ãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
            </div>

            <div class="button-group">
                <button class="button disabled" id="next-button" onclick="nextQuestion()">
                    æ¬¡ã®å•é¡Œ
                </button>
            </div>

            <button class="back-button" onclick="showMenu()">
                ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
            </button>
        </div>

        <!-- çµæœç”»é¢ -->
        <div id="results" class="screen hidden">
            <h2>ğŸ‰ ã‚¯ã‚¤ã‚ºçµæœ</h2>
            
            <div class="result">
                <div class="emblem" id="emblem">ğŸ†</div>
                <h3 id="level-title">çµæœ</h3>
                <p id="level-description">èª¬æ˜</p>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <span>æ­£è§£ç‡:</span>
                    <span id="accuracy">0%</span>
                </div>
                <div class="stat-item">
                    <span>æ­£è§£æ•°:</span>
                    <span id="score">0/0</span>
                </div>
            </div>

            <div class="button-group">
                <button class="button" onclick="showMenu()">
                    ğŸ”„ ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦
                </button>
            </div>
        </div>
    </div>

    <script>
        // ã‚µãƒ³ãƒ—ãƒ«ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿
        const quizData = {
            'ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹': [
                {
                    id: '1',
                    text: 'ãƒ«ãƒ•ã‚£ãŒéº¦ã‚ã‚‰å¸½å­ã‚’ã‚·ãƒ£ãƒ³ã‚¯ã‚¹ã‹ã‚‰é ã‹ã£ãŸã®ã¯ä½•æ­³ã®æ™‚ï¼Ÿ',
                    choices: ['5æ­³', '7æ­³', '9æ­³', '11æ­³'],
                    correct: 1,
                    explanation: 'ãƒ«ãƒ•ã‚£ãŒã‚·ãƒ£ãƒ³ã‚¯ã‚¹ã«éº¦ã‚ã‚‰å¸½å­ã‚’é ã‘ã‚‰ã‚ŒãŸã®ã¯7æ­³ã®æ™‚ã§ã™ã€‚'
                },
                {
                    id: '2', 
                    text: 'ã‚¾ãƒ­ãŒãƒŸãƒ›ãƒ¼ã‚¯ã¨æˆ¦ã£ãŸå ´æ‰€ã¯ï¼Ÿ',
                    choices: ['ãƒãƒ©ãƒ†ã‚£ã‚¨', 'ãƒ•ãƒ¼ã‚·ãƒ£æ‘', 'ã‚·ãƒ­ãƒƒãƒ—æ‘', 'ã‚³ã‚³ãƒ¤ã‚·æ‘'],
                    correct: 0,
                    explanation: 'ã‚¾ãƒ­ã¯ãƒŸãƒ›ãƒ¼ã‚¯ã¨æµ·ä¸Šãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ãƒ»ãƒãƒ©ãƒ†ã‚£ã‚¨ã§æˆ¦ã„ã¾ã—ãŸã€‚'
                },
                {
                    id: '3',
                    text: 'ãƒŠãƒŸãŒãƒ™ãƒ«ãƒ¡ãƒ¼ãƒ«ã•ã‚“ã®ãŸã‚ã«éš ã—ã¦ã„ãŸè²¡ç”£ã¯ã„ãã‚‰ï¼Ÿ',
                    choices: ['1å„„ãƒ™ãƒªãƒ¼', '5000ä¸‡ãƒ™ãƒªãƒ¼', '3000ä¸‡ãƒ™ãƒªãƒ¼', '1å„„ãƒ™ãƒªãƒ¼ä»¥ä¸Š'],
                    correct: 0,
                    explanation: 'ãƒŠãƒŸãŒãƒ™ãƒ«ãƒ¡ãƒ¼ãƒ«ã•ã‚“ã®ãŸã‚ã«éš ã—ã¦ã„ãŸè²¡ç”£ã¯1å„„ãƒ™ãƒªãƒ¼ã§ã—ãŸã€‚'
                }
            ],
            'åƒ•ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¢ã‚«ãƒ‡ãƒŸã‚¢': [
                {
                    id: '4',
                    text: 'ä¸»äººå…¬ç·‘è°·å‡ºä¹…ã®å€‹æ€§ã¯ï¼Ÿ',
                    choices: ['ãƒ¯ãƒ³ãƒ»ãƒ•ã‚©ãƒ¼ãƒ»ã‚ªãƒ¼ãƒ«', 'ã‚ªãƒ¼ãƒ«ãƒ»ãƒ•ã‚©ãƒ¼ãƒ»ãƒ¯ãƒ³', 'çˆ†ç ´', 'ç„¡å€‹æ€§'],
                    correct: 0,
                    explanation: 'ãƒ¯ãƒ³ãƒ»ãƒ•ã‚©ãƒ¼ãƒ»ã‚ªãƒ¼ãƒ«ã¯ä»£ã€…å—ã‘ç¶™ãŒã‚Œã¦ããŸå€‹æ€§ã§ã™ã€‚'
                },
                {
                    id: '5',
                    text: 'çˆ†è±ªå‹å·±ã®å€‹æ€§ã¯ï¼Ÿ',
                    choices: ['çˆ†ç ´', 'åŠå†·åŠç‡ƒ', 'ç„¡é‡åŠ›', 'ç¡¬åŒ–'],
                    correct: 0,
                    explanation: 'çˆ†è±ªå‹å·±ã¯æŒã‹ã‚‰çˆ†ç ´ã‚’èµ·ã“ã™ã“ã¨ãŒã§ãã¾ã™ã€‚'
                },
                {
                    id: '6',
                    text: 'éº—æ—¥ãŠèŒ¶å­ã®å€‹æ€§ã¯ï¼Ÿ',
                    choices: ['ç„¡é‡åŠ›', 'å‰µé€ ', 'é›»æ°—', 'é«˜é€Ÿ'],
                    correct: 0,
                    explanation: 'éº—æ—¥ãŠèŒ¶å­ã¯è§¦ã‚ŒãŸã‚‚ã®ã‚’ç„¡é‡åŠ›ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚'
                }
            ],
            'HUNTERÃ—HUNTER': [
                {
                    id: '7',
                    text: 'ã‚´ãƒ³ãŒåˆã‚ã¦ã‚­ãƒ«ã‚¢ã¨å‡ºä¼šã£ãŸãƒãƒ³ã‚¿ãƒ¼è©¦é¨“ã®å ´æ‰€ã¯ã©ã“ï¼Ÿ',
                    choices: ['ã‚¾ãƒ«ãƒ‡ã‚£ãƒƒã‚¯å®¶', 'ãƒ“ã‚¹ã‚±ã®æ£®', 'ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚µã‚¤ãƒˆ', 'ãƒ–ãƒ©ãƒ³ã‚¯ã‚¹å±±'],
                    correct: 2,
                    explanation: 'ãƒãƒ³ã‚¿ãƒ¼è©¦é¨“ã®ç¬¬ä¸€æ¬¡è©¦é¨“ä¸­ã«ã€ã‚´ãƒ³ã¯ãƒ–ãƒ©ãƒ³ã‚¯ã‚¹å±±ã§ã‚­ãƒ«ã‚¢ã¨å‡ºä¼šã„ã¾ã—ãŸã€‚'
                },
                {
                    id: '8',
                    text: 'ãƒãƒ³ã‚¿ãƒ¼è©¦é¨“ã®ç¬¬ä¸€æ¬¡è©¦é¨“ã§å‡ºã•ã‚ŒãŸèª²é¡Œã¯ï¼Ÿ',
                    choices: ['ã‚°ãƒ«ãƒ¡ãƒãƒ³ã‚¿ãƒ¼ã¨ã—ã¦ã®æ–™ç†', 'æ£®ã®å‹•ç‰©ã‚’æ•ç²ã™ã‚‹', 'ç›®çš„åœ°ã¾ã§ãŸã©ã‚Šç€ã', 'è¿·è·¯ã‚’çªç ´ã™ã‚‹'],
                    correct: 0,
                    explanation: 'ç¬¬ä¸€æ¬¡è©¦é¨“ã¯ã€ã‚µãƒˆãƒ„ã®ã€Œã‚°ãƒ«ãƒ¡ãƒãƒ³ã‚¿ãƒ¼ã¨ã—ã¦ã®æ–™ç†ã€ã§ã—ãŸã€‚'
                },
                {
                    id: '9',
                    text: 'ãƒãƒ³ã‚¿ãƒ¼è©¦é¨“ã®ç¬¬äºŒæ¬¡è©¦é¨“ã§ã€ãƒ¡ãƒ³ãƒãŒå‡ºã—ãŸèª²é¡Œã¯ï¼Ÿ',
                    choices: ['å¯¿å¸ã‚’ä½œã‚‹', 'å·¨å¤§ãªè±šã‚’æ•ã¾ãˆã‚‹', 'åµæ–™ç†ã‚’ä½œã‚‹', 'è–¬è‰ã‚’æ¢ã™'],
                    correct: 2,
                    explanation: 'ç¬¬äºŒæ¬¡è©¦é¨“ã¯ã€ãƒ¡ãƒ³ãƒã«ã‚ˆã‚‹ã€Œåµæ–™ç†ã‚’ä½œã‚‹ã€ã¨ã„ã†èª²é¡Œã§ã—ãŸã€‚'
                }
            ]
        };

        // ã‚ªã‚¿ã‚¯åº¦åˆ¤å®šãƒ‡ãƒ¼ã‚¿
        const otakuLevels = [
            { threshold: 95, level: 'god', title: 'ç¥', description: 'å®Œç’§ã™ãã‚‹...ã‚‚ã¯ã‚„äººé–“ã‚’è¶…è¶Šã—ã¦ã„ã‚‹', color: '#FFD700', emblem: 'ğŸ‘‘' },
            { threshold: 80, level: 'legend', title: 'ç”Ÿã‘ã‚‹ä¼èª¬', description: 'ã‚¢ãƒ‹ãƒ¡ãƒ»æ¼«ç”»ç•Œã®ç”Ÿãå­—å¼•', color: '#FF6B35', emblem: 'âš¡' },
            { threshold: 60, level: 'veteran', title: 'å¤å‚å…µ', description: 'é•·å¹´åŸ¹ã£ãŸçŸ¥è­˜ãŒå…‰ã‚‹ç«‹æ´¾ãªå¤å‚ã‚ªã‚¿ã‚¯', color: '#8A2BE2', emblem: 'ğŸ›¡ï¸' },
            { threshold: 40, level: 'otaku', title: 'ã‚ªã‚¿ã‚¯ã®åµ', description: 'ã‚ªã‚¿ã‚¯ã®ç‰‡é±—ã‚’è¦‹ã›ã¦ã„ã¾ã™', color: '#4169E1', emblem: 'ğŸ¥š' },
            { threshold: 20, level: 'general', title: 'ä¸€èˆ¬äºº', description: 'ä¸€èˆ¬çš„ãªçŸ¥è­˜ãƒ¬ãƒ™ãƒ«', color: '#32CD32', emblem: 'ğŸ‘¤' },
            { threshold: 10, level: 'apprentice', title: 'è¦‹ç¿’ã„', description: 'è¦‹ç¿’ã„ãƒ¬ãƒ™ãƒ«', color: '#FFA500', emblem: 'ğŸ“š' },
            { threshold: 0, level: 'newbie', title: 'ã«ã‚ã‹', description: 'ã¾ã ã¾ã ã“ã‚Œã‹ã‚‰ï¼', color: '#DC143C', emblem: 'ğŸŒ±' }
        ];

        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
        let currentSeries = '';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let answers = [];
        let selectedAnswer = null;

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
        }

        function showMenu() {
            showScreen('menu');
            resetGame();
        }

        function resetGame() {
            currentSeries = '';
            currentQuestions = [];
            currentQuestionIndex = 0;
            answers = [];
            selectedAnswer = null;
        }

        function startQuiz(series) {
            currentSeries = series;
            
            if (series === 'random') {
                // å…¨ã‚·ãƒªãƒ¼ã‚ºã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠ
                const allQuestions = [...quizData['ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹'], ...quizData['åƒ•ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¢ã‚«ãƒ‡ãƒŸã‚¢'], ...quizData['HUNTERÃ—HUNTER']];
                currentQuestions = shuffleArray(allQuestions).slice(0, 9);
            } else {
                currentQuestions = shuffleArray([...quizData[series]]);
            }
            
            currentQuestionIndex = 0;
            answers = [];
            
            showScreen('quiz');
            displayQuestion();
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function displayQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            
            document.getElementById('quiz-title').textContent = `ğŸ¯ ${currentSeries}ã‚¯ã‚¤ã‚º`;
            document.getElementById('progress').textContent = `å•é¡Œ ${currentQuestionIndex + 1} / ${currentQuestions.length}`;
            document.getElementById('question-text').textContent = question.text;
            
            const choicesContainer = document.getElementById('choices');
            choicesContainer.innerHTML = '';
            
            question.choices.forEach((choice, index) => {
                const button = document.createElement('button');
                button.className = 'choice';
                button.textContent = `${index + 1}. ${choice}`;
                button.onclick = () => selectAnswer(index);
                choicesContainer.appendChild(button);
            });
            
            selectedAnswer = null;
            updateNextButton();
        }

        function selectAnswer(answerIndex) {
            selectedAnswer = answerIndex;
            
            document.querySelectorAll('.choice').forEach((choice, index) => {
                choice.classList.toggle('selected', index === answerIndex);
            });
            
            updateNextButton();
        }

        function updateNextButton() {
            const nextButton = document.getElementById('next-button');
            if (selectedAnswer !== null) {
                nextButton.classList.remove('disabled');
                nextButton.textContent = currentQuestionIndex < currentQuestions.length - 1 ? 'æ¬¡ã®å•é¡Œ' : 'çµæœã‚’è¦‹ã‚‹';
            } else {
                nextButton.classList.add('disabled');
            }
        }

        function nextQuestion() {
            if (selectedAnswer === null) return;
            
            const question = currentQuestions[currentQuestionIndex];
            const isCorrect = selectedAnswer === question.correct;
            
            answers.push({
                questionId: question.id,
                selectedAnswer: selectedAnswer,
                isCorrect: isCorrect
            });
            
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            const correctCount = answers.filter(a => a.isCorrect).length;
            const totalCount = answers.length;
            const accuracy = Math.round((correctCount / totalCount) * 100);
            
            // ã‚ªã‚¿ã‚¯åº¦è¨ˆç®—
            const otakuLevel = calculateOtakuLevel(accuracy);
            
            document.getElementById('emblem').textContent = otakuLevel.emblem;
            document.getElementById('emblem').style.backgroundColor = otakuLevel.color;
            document.getElementById('level-title').textContent = otakuLevel.title;
            document.getElementById('level-title').style.color = otakuLevel.color;
            document.getElementById('level-description').textContent = otakuLevel.description;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
            document.getElementById('score').textContent = `${correctCount}/${totalCount}`;
            
            showScreen('results');
        }

        function calculateOtakuLevel(accuracy) {
            for (let level of otakuLevels) {
                if (accuracy >= level.threshold) {
                    return level;
                }
            }
            return otakuLevels[otakuLevels.length - 1];
        }

        // åˆæœŸåŒ–
        showScreen('menu');
    </script>
</body>
</html>